<!DOCTYPE html>
<html lang="en">
<head>
	<meta http-equiv="content-type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	<style>
		div {
			border: 1px solid black;
		}
	</style>
	<script src="jquery-3.2.1.min.js" type="text/javascript"></script>
	<script>
		var restserviceUrl = "./";

		$(function() {
			checkLogin(
				checkApiGet
			);
		});

		function checkLogin(callback)
		{
			$.ajax({
				url: restserviceUrl + "login.php",
				type: "post",
				data: {
					user: "Manuel",
					pw: "m"
				},
				dataType: "text",
				error: function(){
					$("body").append("checkLogin fehlgeschlagen<br/>");
				},
				success: function(result){
					var token = JSON.parse(result).token;
					$("body").append("checkLogin erfolgreich<br/>")
							 .append($("<div/>")
							 		 .html(token));
					callback(null, token);
				}
			});
		}

		function checkApiGet(error, token)
		{
			$.ajax({
				url: restserviceUrl + "api.php/user",
				type: "get",
				headers: {
					"Authorization": token
				},
				dataType: "json",
				error: function(){
					$("body").append("checkApiGet fehlgeschlagen<br/>");
				},
				success: function(result){
					$("body").append("checkApiGet erfolgreich:<br/>")
							 .append($("<div/>")
							 		 .html(result.length));
					//checkApiInsert(token);
				}
			});
		}

		function checkApiInsert(token)
		{
			$.ajax({
				url: restserviceUrl + "api.php/user",
				type: "get",
				headers: {
					"Authorization": token
				},
				dataType: "json",
				error: function(){
					$("body").append("checkApiInsert fehlgeschlagen<br/>");
				},
				success: function(result){
					$("body").append("checkApiInsert erfolgreich:<br/>")
							 .append($("<div/>")
							 		 .html(result));
				}
			});
		}
	</script>
</head>
<body>
</body>
</html>